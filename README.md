# Shadowsocks-rust 一键管理脚本（中文）

这是一个面向 Linux 的 `shadowsocks-rust` 管理脚本，支持：

- 一键安装 / 修复安装
- 多端口管理（新增、修改、删除）
- 端口级配置（监听地址、加密方式、密钥、DNS、outbound_bind_addr）
- 服务管理（启动/停止/重启、开机自启开关）
- 自动更新（仅检测到新版本时更新）
- 全局配置（`ipv6_first`）

脚本文件：`install_ss_rust.sh`

---

## 功能特性

### 1) 安装与修复

- 自动安装依赖：`curl`、`jq`、`tar`、`xz`、`awk`
- 自动识别架构：`x86_64` / `aarch64`
- 从官方 Releases 下载最新版本并安装二进制
- 自动创建 systemd 服务并启动
- 检测“半安装状态”并自动修复（如服务缺失、端口配置缺失）

### 2) 端口管理

- 新增端口：端口范围 `10000-65535`，留空可随机
- 修改端口：
  - 回车保持原值
  - 端口支持 `random` / `r` 随机
  - 改加密方式后，密钥留空会自动生成匹配新密钥
- 删除端口：序号选择，避免手输端口

### 3) DNS 与网络

- DNS 为**端口级配置**（每个端口独立）
- 全局网络配置仅保留 `ipv6_first`

### 4) 服务管理

- 启动 / 停止 / 重启
- 启用 / 关闭开机自启
- 菜单状态实时显示：安装状态、服务状态、自启状态、当前版本

### 5) 更新

- 先比较当前版本与最新版本
- 仅在有新版本时执行更新
- 若服务运行中，更新后自动重启服务

---

## 使用方法

```bash
chmod +x install_ss_rust.sh
sudo ./install_ss_rust.sh
```

> 需 root 权限运行。

---

## 菜单说明

- `1` 安装并初始化
- `2` 查看配置
- `3` 新增端口
- `4` 修改端口
- `5` 删除端口
- `6` 查看日志
- `7` 服务管理
- `8` 更新程序
- `9` 完全卸载
- `10` 全局配置（IPv6优先）
- `0` 退出

---

## 常见问题

### Q1：之前安装中断，导致“已安装但服务没起来/没端口”

直接重新执行菜单 `1`，脚本会自动识别并进入修复流程。

### Q2：为什么 DNS 不在全局里？

脚本当前设计为“端口级 DNS”，每个端口可独立设置，更灵活。

### Q3：修改端口时如何随机端口？

在“新端口”输入 `random` 或 `r` 即可。

---

## 免责声明

请仅在合法合规场景下使用本脚本和代理服务。
